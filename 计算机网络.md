### 计算机网络体系结构

[![x219M9.png](https://s1.ax1x.com/2022/10/24/x219M9.png)](https://imgse.com/i/x219M9)

[![x21FVx.png](https://s1.ax1x.com/2022/10/24/x21FVx.png)](https://imgse.com/i/x21FVx)

#### **协议三要素**

- **语法：**定义所交换信息的格式。
- **语义：**定义收发双方所要完成的操作。
- **同步：**定义收发双方的时序关系。

[![x2Wfot.png](https://s1.ax1x.com/2022/10/24/x2Wfot.png)](https://imgse.com/i/x2Wfot)





### 数据通信基础知识

#### 数据通信模型

一个数据通信系统可以划分为三大部分，源系统（或发送端）、传输系统（或传输网络）和目的系统（或接收端）

![img](https://img-blog.csdnimg.cn/34f5018d274a4be8a4568d28dd1e3612.jpeg?x-oss-process=)

在数据通信系统中，通常将源计算机、目的计算机称作DTE，即数据终端设备。DTE使用的数据与通信线路传输的数据，从类型来看，大多数的时候是不一样的，需要进行变换。进行信号变换的设备称作DCE，即信号变换器。 在计算机网络发展的初期，DTE中使用的是数字信号，通信线路传输的是模拟信号。DCE负责信号变换，典型的设备是modem，即调制解调器。

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200520132518775.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ0NzIzNzcz,size_16,color_FFFFFF,t_70)



源点：源点设备产生要传输的数据。例如计算机将键盘输入的信息转换成数字比特流发出

发送器：接收源点发出的二进制比特流转换成传输系统能够传输的数据。典型的发送器就是调制器 (modem)

接收器：接收传输系统传输来的信号并转换为终点设备能够处理的信息。典型的接收器就是解调器 (modem)

终点：终点设备接收接收器发送来的数字比特流并把信息通过屏幕显示器反馈给用户。

#### 调制与解调制

- 通常将数字信号变换为模拟信号称作调制；
- 将模拟信号变换为数字信号称作解调制。二者的变换方法是相似的，通常在同一个设备上实现。

#### 数据通信相关术语

信号：数据的电气或电磁的表现（就是将数据用另外一种形态表现出来，就好像水转换成冰，其实质还是水，仅仅是形态变了)。而数据是传送信息（如图片和文字等）的实体。

```ASN.1
数字信号/离散信号：代表消息的参数的取值是离散的。

模拟信号/连续信号： 代表消息的参数的取值是连续的。
```

注意：

无论数据或信号，都既可以是模拟的，也可以是数字的。“模拟的”就是连续变化的，而数字的表示取值仅允许是有限的离散值。



数据：传送消息的实体 ，通常是有意义的符号序列。

数据通信指在不同计算机之间传输表示信息的二进制数0、1序列的过程。 

信源：产生和发生数据的源头。

信宿：接收数据的终点。

 信道：信号的传输媒介。一般用来表示某一个方向传送信息的介质，因此一条通信线路往往包含一条发送信道和一条接收信道。

- 使用**数字信号**的信道称作**数字信道**；
- 使用**模拟信号**的信道称作**模拟信道**

![img](https://img-blog.csdnimg.cn/db200e255b8b49679b7c360d78569187.jpeg)

#### 数字信号和模拟信号的比较

**模拟信号与数字信号：**

- 由于模拟信号的波高和频率连续变化，因此在传输一定距离内，**信号衰减较小，信息保留相对完整**；

- 而数字信号是由多个频率的波形叠加而成，各个波形衰减速度不同，在传输的过程中，**信号变形比较严重，信息缺失较多**

  [![x2yrRJ.png](https://s1.ax1x.com/2022/10/24/x2yrRJ.png)](https://imgse.com/i/x2yrRJ)

#### 三种通信方式

**单工通信：**只有一个方向的通信而没有反方向的交互，仅需要一条信道。例如广播

![img](https://img-blog.csdnimg.cn/337c9b3a3e3145c19c7bb4f20eb44588.png)

**半双工通信/双向交替通信：**通信的双方都可以发送或接收信息，但任何一方都不能同时发送或接收，需要两条信道。例如对讲机。

![img](https://img-blog.csdnimg.cn/bdb9059bf88a4180b430a5973da6c623.png)

**全双工通信/双向同时通信：**通信的双方都可以同时发送和接收信息，需要两条信道。例如打电话。

![img](https://img-blog.csdnimg.cn/56b4ee7112334a4ebca6820a7b8f2716.png)

 基带信号（即基本频带信号）——来自信源的信号。像计算机输出的代表各种文字或图像文件的数据信号都属于基带信号。
基带信号往往包含有较多的低频成分，甚至有直流成分，而许多信道并不能传输这种低频分量或直流分量。因此必须对基带信号进行调制。

调制分为两大类：
基带调制：仅对基带信号的波形进行变换，使它能够与信道特性相适应。变换后的信号仍然是基带信号。把这种过程称为编码(coding)。
带通调制：使用载波(carrier）进行调制，把基带信号的频率范围搬移到较高的频段，并转换为模拟信号，这样就能够更好地在模拟信道中传输（即仅在一段频率范围内能够通过信道)
带通信号：经过载波调制后的信号。

#### 串行传输&并行传输

![img](https://img-blog.csdnimg.cn/41cc07218988424c8805b1dc72914718.jpeg)



### 

#### 同步传输&异步传输

![img](https://img-blog.csdnimg.cn/cf2939db87f34b34a650d2eaada26637.jpeg)





## 第三章 数据量链路层

### 3.1使用点对点信道的数据链路层

#### 数据链路和帧

点对点信道的数据链路层

**链路：**链路就是从一个节点到相邻节点的一段物理线路（有线或无线），而中间没有任何其他的交换节点。

**

**数据链路 (data link) ：**当需要在一条线路上传送数据时，除了必须有一条物理线路外，还必须有一些必要的通信协议来控制这些数据的传输，把实现这些协议的硬件和软件加到链路上，就构成了数据链路。

**帧：**帧是数据链路层对等实体之间在水平方向进行逻辑通信的协议数据单元PDU。

[![x2I1v8.png](https://s1.ax1x.com/2022/10/24/x2I1v8.png)](https://imgse.com/i/x2I1v8)

#### 三个基本问题

**封装成帧与透明传输**

[![x2IdCq.png](https://s1.ax1x.com/2022/10/24/x2IdCq.png)](https://imgse.com/i/x2IdCq)

应用层将待发送的应用层协议数据单元交付给运输层，运输层在应用层协议数据单元前添加运输层首部使之封装成运输层协议数据单元，然后运输层将运输层协议数据单元发交付给网络层，网络层在运输层协议数据单元前加上网络层首部使之封装成网络层协议数据单元，网络层将网络层协议数据单元交付给数据链路层，数据链路层在网络层协议数据单元上添加首部和尾部使之封装成帧。

[![x2O64e.png](https://s1.ax1x.com/2022/10/24/x2O64e.png)](https://imgse.com/i/x2O64e)

上图为发送方给接收方发送两个连续的帧，接收方根据帧定界符就能从数据比特流中识别出一个个的帧，但假如数据载荷部分出现一个与帧尾部取值相同的数据，那么接收方就会误以为数据载荷中的比特流为帧尾部，接收方就会出现帧定界错误的问题。

[![x2XnUO.png](https://s1.ax1x.com/2022/10/24/x2XnUO.png)](https://imgse.com/i/x2XnUO)

**差错检测**

发送方给接收方发送帧时，由于现实中的通信链路不是理想的，表示比特的信号在信道上传输时，不可避免地会出现失帧，或是误码。例如比特0变成比特1，比特1变成比特0.

[![x2jDYD.png](https://s1.ax1x.com/2022/10/24/x2jDYD.png)](https://imgse.com/i/x2jDYD)

差错检测措施：发送方的数据链路层采用某种检测技术，根据帧的内容计算出一个检错码，将检错码填入帧尾部，帧尾部中用来存放检错码的字段称为帧检验序列，英文缩写为CFS，下图为PPP帧尾部中的长度为2字节的帧检验序列。

[![x2jTpQ.png](https://s1.ax1x.com/2022/10/24/x2jTpQ.png)](https://imgse.com/i/x2jTpQ)

接收方的数据链路层从帧尾部取出检错码，采用与发送方相同的检错技术，就可通过检错码检测出帧在传输过程中是否出现误码。

**可靠传输**

若数据链路层向上层提供的时不可靠传输服务，则接收方的数据链路层丢弃有误码的帧即可，若数据链路层向上层提供的是可靠传输服务，数据链路层通过某种机制使发送方发送什么信息接收方就接收什么信息。例如接收方接收到有误码的帧后就通知发送方重新发送有误码的帧，发送方给接收方重新发送该帧。

[![x2vVAK.png](https://s1.ax1x.com/2022/10/24/x2vVAK.png)](https://imgse.com/i/x2vVAK)

##### 封装成帧与透明传输

**帧：**是数据链路层对等实体之间在水平方向上进行逻辑通信的协议数据单元PDU。

**封装成帧：**封装成帧就是数据链路层将上层交付下来的协议数据单元添加帧头和帧尾使之成为帧。

[![x2xPPS.png](https://s1.ax1x.com/2022/10/24/x2xPPS.png)](https://imgse.com/i/x2xPPS)

将上层交付下来的协议数据单元封装成帧后，还要通过物理层将构成帧的比特流转换成电信号发送到传输媒体，即源点 (发送端) 将比特流发送给发送器，发送器将接收的比特流调制成可以被通信信道识别的电信号 (模拟信号) ，然后通信信道将电信号(模拟信号) 发送给接收器，接收器将电信号 (模拟信号) 转换成可以被终点(接收端)物理层识别的比特流，终点的物理层接收到比特流后将其转换为数字信号在计算机中传输。

[![x2xWi8.png](https://s1.ax1x.com/2022/10/24/x2xWi8.png)](https://imgse.com/i/x2xWi8)



如何从比特流中提取出一个个的帧

帧头和帧尾的作用之一就是帧定界，区分出一个个的帧

[![x2zkFK.png](https://s1.ax1x.com/2022/10/24/x2zkFK.png)](https://imgse.com/i/x2zkFK)

 [![x2zmyd.png](https://s1.ax1x.com/2022/10/24/x2zmyd.png)](https://imgse.com/i/x2zmyd)

但并不是所有帧都包含帧定界标志，下图中的帧头和帧尾不包含帧定界标志

[![x2zrfU.png](https://s1.ax1x.com/2022/10/24/x2zrfU.png)](https://imgse.com/i/x2zrfU)

上图不包含帧定界标志，那么物理层如何从比特流提取出一个个的以太网帧呢？

实际上，以太网的数据链路层封装好MAC帧后，将其交付给物理层，物理层会会在MAC帧前添加8字节的前导码，前导码中的前七个字节为前同步码，作用是使接收方的时钟同步，最后的1个字节为帧定界符，表明其后面跟着的是帧，然后将比特流发送给发送器 (调制器) 将其调制为能够被通信信道传输的电信号 (模拟信号)，发送器向通信信道发送电信号 (模拟信号) ，通信信道将接收的电信号发送给终点的接收器 (解调器) ，接收器将电信号转换为比特流发送给源点的物理层，物理层从比特流中取出一个个帧，去对上层服务。

[![xRSOv4.png](https://s1.ax1x.com/2022/10/24/xRSOv4.png)](https://imgse.com/i/xRSOv4)

以太网还规定了每次发送帧的时间间隔为96比特的发送时间，所以MAC并不需要帧结束界定符

[![xRppUx.png](https://s1.ax1x.com/2022/10/24/xRppUx.png)](https://imgse.com/i/xRppUx)



**透明传输：**透明传输是指数据链路层对上层交付的传输数据没有任何限制，就好像数据链路层不存在一样。



[![x2O64e.png](https://s1.ax1x.com/2022/10/24/x2O64e.png)](https://imgse.com/i/x2O64e)

上图为发送方给接收方发送两个连续的帧，接收方根据帧定界符就能从数据比特流中识别出一个个的帧，但假如数据载荷部分出现一个与帧尾部取值相同的数据，接收方在收到第一个帧定界标志时，会认为这是帧的开始，但接收方收到数据载荷中的与帧定界标志相同值的数据时会认为这是帧的结束，接收方就会出现帧定界错误的问题。

如上所述，如果不能解决帧定界问题，就会导致数据链路层封装帧时不能添加帧定界符，数据链路层上层交付的传输数据受到限制，不能成为透明传输。

一个较好的解决方案是，在封装帧时给帧头定界符和帧尾定界符加上转义字符，这样终点的物理层在接收帧时就可以不受到影响，同时接收到一个帧定界符时也会剔除转义字符，当遇到第二个转义字符时既是帧的结尾。

以上介绍的是面向字节的物理链路使用字节填充（或称为字符填充）的方法实现透明传输。

对于面向比特的物理链路使用比特填充的方法实现透明传输。

[![xRPpan.png](https://s1.ax1x.com/2022/10/24/xRPpan.png)](https://imgse.com/i/xRPpan)

帧的数据部分出现了两个帧定界标志，但他们是数据，零比特填充方法是在传输前对帧数据部分先进性扫描，如果出现6个连续的1，那就在每五个连续1的后面添加一个0，这样就保证帧定界，在整个帧中的唯一性，也就可以实现透明传输。接收方只需要将帧数据部分中每五个连续1后面的0剔除即可。

[![xRPtZd.png](https://s1.ax1x.com/2022/10/24/xRPtZd.png)](https://imgse.com/i/xRPtZd)

##### 差错检测

**误码：**实际通信链路都不是理想的，比特在传输过程中可能会产生差错（称为比特差错）

- 比特0可能会变成比特1
- 比特1可能会变成比特0

<img src="https://2114301743-1314609253.cos.ap-nanjing.myqcloud.com/img/image-20221030075604738.png" alt="image-20221030075604738" style="zoom: 50%;" />

- 在一段时间内，传输错误的的比特数量占所传输比特总数的比率称为误码率
- 提高链路的信噪比，可以降低误码率。但在实际的通信链路上，不可能出现误码率下降为零
- 使用差错检测技术来检测数据在传输过程中是否产生了比特差错，是数据链路层所要解决的重要问题之一

<img src="https://2114301743-1314609253.cos.ap-nanjing.myqcloud.com/img/image-20221030080127691.png" alt="image-20221030080127691" style="zoom:50%;" />

例如发送方的数据链路层采用某种检错技术，根据帧的内容计算出一个检错码，将检错码天入帧尾部，接收方的数据链路层从帧的尾部取出检错码，采用与发送方相同的检错技术，就可以检测出传输过程中是否出现误码，帧尾部中用来存放检错码的字段，称为帧检验序列FCS

<img src="https://2114301743-1314609253.cos.ap-nanjing.myqcloud.com/img/image-20221030080620967.png" alt="image-20221030080620967" style="zoom: 80%;" />

<img src="https://2114301743-1314609253.cos.ap-nanjing.myqcloud.com/img/image-20221030080638519.png" alt="image-20221030080638519" style="zoom: 80%;" />

在点对点协议PPP帧的帧尾部中包含2字节的FCS字段，用来存放检错码，在以太网V2的MAC帧的帧尾部中包含4字节的FCS字段，用来存放检错码

**奇偶校验**

- **奇校验：**奇校验是在待发送的数据后面添加1个校验位，使得添加该校验位后的整个数据中比特1的个数为奇数
  - 1数量的奇性改变，可以检测出错误
  - 1数量的奇性不改变，不能检测出错误
- **偶校验：**偶校验是在待发送的数据后面添加1个校验位，使得添加该校验位后的整个数据中比特1的个数为偶数
  - 1数量的偶性改变，可以检测出错误
  - 1数量的偶性不改变，不能检测出错误

<img src="https://2114301743-1314609253.cos.ap-nanjing.myqcloud.com/img/image-20221030081840704.png" alt="image-20221030081840704" style="zoom: 50%;" />

**循环冗余校验**（Cyclic Redundancy Check，CRC）

- 收发双方约定好一个生成多项式G(X)
- 发送方基于待发送的数据和生成多项式G(X)，计算出差错检测码（冗余码），将冗余码添加到待发送数据的后面一起传输
- **接收方：**接收方收到数据和冗余码后，通过生成多项式G(X)，来计算收到的数据和冗余码是否产生误码

<img src="https://2114301743-1314609253.cos.ap-nanjing.myqcloud.com/img/image-20221030082717331.png" alt="image-20221030082717331" style="zoom: 50%;" />

将待发送的数据作为被除数的一部分，后面添加生成多项式最高次个0构成被除数，生成多项式的各项系数构成的比特串作为除数，进行除法得到商和余数，将余数添加到发送数据的后面一起发送，商仅作为标记，防止计算过程出现错误，余数长度应与生成多项式最高次数相同，二进制模二除法既不向上位借位，也不比较除数和被除数的对应位，只要以相同位数进行想除即可，相当于对应位进行逻辑异或运算

- **接收方：**

<img src="https://2114301743-1314609253.cos.ap-nanjing.myqcloud.com/img/image-20221030084305150.png" alt="image-20221030084305150" style="zoom:50%;" />

将收到的数据和冗余码作为被除数，生成多项式各项系数构成的比特串作为除数，进行除法得到商和余数，如果余数为0就可以判断数据和冗余码中未出现误码，如果不为零则可判断数据和冗余码中出现了误码

<img src="https://2114301743-1314609253.cos.ap-nanjing.myqcloud.com/img/image-20221030093505128.png" alt="image-20221030093505128" style="zoom: 50%;" />

<img src="https://2114301743-1314609253.cos.ap-nanjing.myqcloud.com/img/image-20221030093634852.png" alt="image-20221030093634852" style="zoom:50%;" />



![image-20221030094132741](https://2114301743-1314609253.cos.ap-nanjing.myqcloud.com/img/image-20221030094132741.png)

奇偶校验和冗余校验只能发现错误，不能定位错位，因此无法纠正错误，循环冗余校验CRC具有很好的检错能力（漏检率极低），虽然计算比较复杂，但非常易于用硬件实现，因此被广泛应用于数据链路层



#### 可靠传输的基本概念

- 使用差错检测技术（例如循环冗余校验CRC），接收方的数据链路层就可检测出帧在传输过程中是否产生了误码（比特差错）
- 数据链路层向上层提供的服务类型
  - 不可靠传输服务：仅仅丢弃有误码的帧，其他什么也不做
  - 可靠传输服务：通过某种机制实现发送什么，接收方最终就能收到什么，接收方会将有误码的帧返回给接收方，接收方重新发送有误码的帧，但具体的实现机制很复杂，例如发送方返回去的帧可能在传输过程中丢失

![image-20221030115154685](https://2114301743-1314609253.cos.ap-nanjing.myqcloud.com/img/image-20221030115154685.png)

- 一般情况下，有线链路的误码率比较低。为了减小开销，并不要求数据链路层向上层提供可靠传输服务。即使出现了误码，可靠传输的问题由其上层处理
- 无线链路易受干扰，误码率比较高，因此要求数据链路层必须向上层提供可靠传输服务

<img src="https://2114301743-1314609253.cos.ap-nanjing.myqcloud.com/img/image-20221030115946902.png" alt="image-20221030115946902" style="zoom: 50%;" />

**传输差错不仅是出现误码还包括**

<img src="https://2114301743-1314609253.cos.ap-nanjing.myqcloud.com/img/image-20221030120113654.png" alt="image-20221030120113654" style="zoom:50%;" />

**分组丢失**

<img src="https://2114301743-1314609253.cos.ap-nanjing.myqcloud.com/img/image-20221030121918229.png" alt="image-20221030121918229" style="zoom:50%;" />

假设主机H1给H3发送一个分组，当分组到达传输路径上的路由器R2时，由于R2的输入队列快满了，R2根据自身的分组丢弃策略，决定主动丢弃该分组，这就是分组丢失的情况

**分组失序**

<img src="https://2114301743-1314609253.cos.ap-nanjing.myqcloud.com/img/image-20221030120901181.png" alt="image-20221030120901181" style="zoom: 50%;" />

主机H1给H3按序发送了三个分组，由于每个分组可以走不同的传输路径，各路径的距离以及不同路径中路由器的性能和繁忙程度都可能不同，因此各分组到达接收方的顺序可能与发送时的顺序不同

**分组重复**

主机H1给H3发送一个分组，当分组到达传输路径上的路由器H5时，由于H5比较繁忙，分组在队列中排队时间长，导致了主机H1对该分组的超时重发，超时重发的分组到达主机H3后，在路由器H5中排队等待的原分组，也到达了主机H3，导致主机H3收到了相同的分组

<img src="https://2114301743-1314609253.cos.ap-nanjing.myqcloud.com/img/image-20221030121805383.png" alt="image-20221030121805383" style="zoom:50%;" />

<img src="https://2114301743-1314609253.cos.ap-nanjing.myqcloud.com/img/image-20221030122022606.png" alt="image-20221030122022606" style="zoom:50%;" />

- 可靠传输服务并不局限于数据链路层，其他各层均可选择实现可靠传输
- 可靠传输的实现比较复杂，开销比较大，是否使用可靠传输取决于应用需求

<img src="https://2114301743-1314609253.cos.ap-nanjing.myqcloud.com/img/image-20221030122642373.png" alt="image-20221030122642373" style="zoom:50%;" />

#### 可靠传输的三种机制

这三种可靠传输实现机制的基本原理并不仅限于数据链路层，可以应用到其上各层。

##### 停止等待协议

**实现原理**：如下图，收发双方基于因特网进行通信，而不是局限在一条点对点的数据链路，纵坐标为时间，发送方给接收方发送一个数据分组，接收方收到后，对其进行差错检测，若美与检测出误码，则接受该数据分组，并给发送方发送确认分组ACK，发送方收到对所发送分组的确认分组后，才能发送下一个数据分组，假设这个数据分组在传输过程中出现了误码，接收方收到后，对其进行差错检测，检测出误码，丢弃该数据分组，并给发送方发送否认分组NAK，发送方收到对发送分组的否认分组后， 重新发送该数据分组。接收方收到后，对其进行差错检测，若没有检测出误码，则接受该数据分组，并给发送方发送确认分组。因此发送方每发送一个数据分组后，并不能立刻将该数据分组从发送缓存中删除，必须等到接收方的确认分组才可以删除。

<img src="https://2114301743-1314609253.cos.ap-nanjing.myqcloud.com/img/image-20221030124441452.png" alt="image-20221030124441452" style="zoom:50%;" />

但如果出现数据分组、确认分组、否认分组丢失的情况，仅有确认、否认和重传这两种机制的停止-等待协议，无法实现可靠传输。



- 接收方收不到数据分组，就不会发送相应的AVK或NAK
- 如果不采取措施，发送方就会一直处于等待接收方ACK或NAK的状态
- 为解决上述问题，发送方可在每发送完一个数据分组时就启动一个超时计时器（Timeout Timer）
- 若到了超时计时器所设置的超时重传时间（Retransmission Time-Out，RTO），但发送方仍未收到接收方的ACK或NAK，就重传之前已发送过的数据分组

<img src="https://2114301743-1314609253.cos.ap-nanjing.myqcloud.com/img/image-20221030125543829.png" alt="image-20221030125543829" style="zoom:50%;" />

RTT是收发双方的平均往返时间，一般可将RTO设置略大于RTT。当发送方的超时计时器出现超时，就立刻重传之前已发送的数据分组，就收方若接收到重传的数据分组，就给发送方发送相应的确认分组，发送方收到后发送下一个数据分组，接收方收到正确的数据分组后，给发送方发送确认分组，所以我们在确认、否认和重传两种机制的基础上又给停止等待协议添加了超时重传机制，然而这样的停止等待协议仍然无法实现可靠传输。



发送方给接收方发送一个数据分组，接收方正确接收该数据分组后，给发送方发送相应的确认分组，然而该确认分组在传输过程中丢失了，这会造成发送方的超时重传，这样接收方会收到两个相同的数据分组，如果接收方不能识别所接收的数据分组与前一次的数据分组是重复的，就会导致分组重复这种差错。所以给每个分组加上序号，接收方收到数据相同的数据分组时，就可识别出分组重复这种传输差错，丢弃该分组，并且还必须向发送方再发送一个确认分组，发送方收到后，发送下一个数据分组，其序号与上一个分组序号不同，接收方若正确接收到该数据分组，就给发送方发送相应的确认分组。所以我们又在确认、否认和重传、超时重传这三种机制的基础上又给停止等待协议添加了给数据分组编号的机制。

<img src="https://2114301743-1314609253.cos.ap-nanjing.myqcloud.com/img/image-20221030132219277.png" alt="image-20221030132219277" style="zoom:50%;" />



既然数据分组需要编号，那么确认分组是否需要编号。

发送方发送0号数据分组，接收方正确接收后给发送方发送确认分组，由于某种原因该确认分组迟到了，发送方因为超时重传，在0号数据分组的重传过程中，发送方收到了迟到的确认分组，于是给接收方发送1号数据分组，接收方收到重传的0号数据分组，根据序号可知，这是重复的数据分组，将其丢弃，并对0号数据分组再发送一个确认分组，这样发送方就会收到两个针对0号数据分组的确认分组，
